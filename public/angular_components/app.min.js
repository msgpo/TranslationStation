"use strict";angular.module("translationStation",["translationStation.api-constants","translationStation.bing-results","translationStation.frengly-results","translationStation.yandex-results","translationStation.input","translationStation.translation-api-util"]);var Constants={};Constants.AllLanguages=["English","Spanish","Arabic","Bosnian (Latin)","Bulgarian","Catalan","Chinese Simplified","Chinese Traditional","Croatian","Czech","Danish","Dutch","Estonian","Finnish","French","German","Greek","Haitian Creole","Hebrew","Hindi","Hmong Daw","Hungarian","Indonesian","Italian","Japanese","Kiswahili","Klingon","Klingon (pIqaD)","Korean","Latvian","Lithuanian","Malay","Maltese","Norwegian","Persian","Polish","Portuguese","Querétaro Otomi","Romanian","Russian","Serbian (Cyrillic)","Serbian (Latin)","Slovak","Slovenian","Swedish","Thai","Turkish","Ukrainian","Urdu","Vietnamese","Welsh","Yucatec Maya","Chinese (Simplified)","Chinese (Traditional)","Filipino","Icelandic","Irish","Latin","Macedonian","Serbian","Slovakian","Albanian","Armenian","Azerbaijan","Afrikaans","Basque","Belarusian","Bosnian","Haitian (Creole)","Galician","Georgian","Yiddish","Kazakh","Kyrgyz","Chinese","Malagasy","Mongolian","Swahili","Tajik","Tagalog","Tatar","Uzbek"],Constants.BingLanguages={ar:"Arabic","bs-Latn":"Bosnian (Latin)",bg:"Bulgarian",ca:"Catalan","zh-CHS":"Chinese Simplified","zh-CHT":"Chinese Traditional",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch",en:"English",et:"Estonian",fi:"Finnish",fr:"French",de:"German",el:"Greek",ht:"Haitian Creole",he:"Hebrew",hi:"Hindi",mww:"Hmong Daw",hu:"Hungarian",id:"Indonesian",it:"Italian",ja:"Japanese",sw:"Kiswahili",tlh:"Klingon","tlh-Qaak":"Klingon (pIqaD)",ko:"Korean",lv:"Latvian",lt:"Lithuanian",ms:"Malay",mt:"Maltese",no:"Norwegian",fa:"Persian",pl:"Polish",pt:"Portuguese",otq:"Querétaro Otomi",ro:"Romanian",ru:"Russian","sr-Cyrl":"Serbian (Cyrillic)","sr-Latn":"Serbian (Latin)",sk:"Slovak",sl:"Slovenian",es:"Spanish",sv:"Swedish",th:"Thai",tr:"Turkish",uk:"Ukrainian",ur:"Urdu",vi:"Vietnamese",cy:"Welsh",yua:"Yucatec Maya"},Constants.BingLanguageCodes={Arabic:"ar","Bosnian (Latin)":"bs-Latn",Bulgarian:"bg",Catalan:"ca","Chinese Simplified":"zh-CHS","Chinese Traditional":"zh-CHT",Croatian:"hr",Czech:"cs",Danish:"da",Dutch:"nl",English:"en",Estonian:"et",Finnish:"fi",French:"fr",German:"de",Greek:"el","Haitian Creole":"ht",Hebrew:"he",Hindi:"hi","Hmong Daw":"mww",Hungarian:"hu",Indonesian:"id",Italian:"it",Japanese:"ja",Kiswahili:"sw",Klingon:"tlh","Klingon (pIqaD)":"tlh-Qaak",Korean:"ko",Latvian:"lv",Lithuanian:"lt",Malay:"ms",Maltese:"mt",Norwegian:"no",Persian:"fa",Polish:"pl",Portuguese:"pt","Querétaro Otomi":"otq",Romanian:"ro",Russian:"ru","Serbian (Cyrillic)":"sr-Cyrl","Serbian (Latin)":"sr-Latn",Slovak:"sk",Slovenian:"sl",Spanish:"es",Swedish:"sv",Thai:"th",Turkish:"tr",Ukrainian:"uk",Urdu:"ur",Vietnamese:"vi",Welsh:"cy","Yucatec Maya":"yua"},Constants.FrenglyLanguageCodes={Arabic:"ar",Bulgarian:"bg","Chinese (Simplified)":"zhCN","Chinese (Traditional)":"zhTW",Croatian:"hr",Czech:"cs",Danish:"da",Dutch:"nl",English:"en",Estonian:"et",Filipino:"tl",Finnish:"fi",French:"fr",German:"de",Greek:"el",Hebrew:"iw",Hindi:"hi",Hungarian:"hu",Icelandic:"is",Indonesian:"id",Irish:"ga",Italian:"it",Japanese:"ja",Korean:"ko",Latin:"la",Latvian:"lv",Lithuanian:"lt",Macedonian:"mk",Maltese:"mt",Norwegian:"no",Persian:"fa",Polish:"pl",Portuguese:"pt",Romanian:"ro",Russian:"ru",Serbian:"sr",Slovakian:"sk",Slovenian:"si",Spanish:"es",Swedish:"sv",Thai:"th",Turkish:"tr",Vietnamese:"vi"},Constants.YandexLanguageCodes={Albanian:"sq",English:"en",Arabic:"ar",Armenian:"hy",Azerbaijan:"az",Afrikaans:"af",Basque:"eu",Belarusian:"be",Bulgarian:"bg",Bosnian:"bs",Welsh:"cy",Vietnamese:"vi",Hungarian:"hu","Haitian (Creole)":"ht",Galician:"gl",Dutch:"nl",Greek:"el",Georgian:"ka",Danish:"da",Yiddish:"he",Indonesian:"id",Irish:"ga",Italian:"it",Icelandic:"is",Spanish:"es",Kazakh:"kk",Catalan:"ca",Kyrgyz:"ky",Chinese:"zh",Korean:"ko",Latin:"la",Latvian:"lv",Lithuanian:"lt",Malagasy:"mg",Malay:"ms",Maltese:"mt",Macedonian:"mk",Mongolian:"mn",German:"de",Norwegian:"no",Persian:"fa",Polish:"pl",Portuguese:"pt",Romanian:"ro",Russian:"ru",Serbian:"sr",Slovakian:"sk",Slovenian:"sl",Swahili:"sw",Tajik:"tg",Thai:"th",Tagalog:"tl",Tatar:"tt",Turkish:"tr",Uzbek:"uz",Ukrainian:"uk",Finnish:"fi",French:"fr",Croatian:"hr",Czech:"cs",Swedish:"sv",Estonian:"et",Japanese:"ja"},angular.module("translationStation.api-constants",[]).value("apiConstants",Constants);var capitalize=function(a){return a[0].toUpperCase()+a.slice(1)};angular.module("translationStation.translation-api-util",["translationStation.api-constants"]).service("translationAPIUtil",["apiConstants","$http",function(a,b){this.detectLanguage=function(c){var d="/api/bing/detect_language/?text="+c.translationInput;b.get(d).success(function(b,d,e,f){c.srcLangBingCode=b,c.srcLangFrenglyCode=b,c.srcLangYandexCode=b,c.detectLangBtnText=a.BingLanguages[b]+" - detected",c.translate()}).error(function(a,b,d,e){c.translatedText="A server error occurred when fetching translation results from "+capitalize(apiName)+"."})},this.resetTranslatedText=function(a){a.translatedText=""},this.translate=function(a,c,d,e){if(""===c.translationInput)return void c.$broadcast("resetTranslatedText");if(c.logoSrc="",d||e)if(d&&e){var f="/api/"+a+"/translate/?from="+d+"&to="+e+"&text="+c.translationInput;b.get(f).success(function(a,b,d,e){c.translatedText=a}).error(function(b,d,e,f){c.translatedText="A server error occurred when fetching translation results from "+capitalize(a)+"."})}else c.translatedText=capitalize(a)+" translation is unavailable for the chosen languages.";else c.translatedText="To begin translation, choose a pair of languages."}}]),angular.module("translationStation.bing-results",["translationStation.translation-api-util"]).controller("BingResultsCtrl",["translationAPIUtil","$controller","$http","$scope",function(a,b,c,d){b("InputCtrl",{$scope:d}),d.logoSrc="/images/bing_logo.png",d.$on("resetTranslatedText",function(b){d.logoSrc="/images/bing_logo.png",a.resetTranslatedText(d)}),d.$on("translate",function(b){a.translate("bing",d,d.srcLangBingCode,d.destLangBingCode)})}]);var lastAPICallTime=null;angular.module("translationStation.frengly-results",[]).controller("FrenglyResultsCtrl",["translationAPIUtil","$controller","$http","$scope",function(a,b,c,d){b("InputCtrl",{$scope:d}),d.logoSrc="/images/frengly_logo.png",d.$on("resetTranslatedText",function(b){d.logoSrc="/images/frengly_logo.png",a.resetTranslatedText(d)}),d.$on("translate",function(a){lastAPICallTime=lastAPICallTime&&lastAPICallTime<(new Date).getTime()-5e3?(new Date).getTime():lastAPICallTime?lastAPICallTime:(new Date).getTime()})}]),angular.module("translationStation.yandex-results",["translationStation.translation-api-util"]).controller("YandexResultsCtrl",["translationAPIUtil","$controller","$http","$scope",function(a,b,c,d){b("InputCtrl",{$scope:d}),d.logoSrc="/images/yandex_logo.png",d.$on("resetTranslatedText",function(b){d.logoSrc="/images/yandex_logo.png",a.resetTranslatedText(d)}),d.$on("translate",function(b){a.translate("yandex",d,d.srcLangYandexCode,d.destLangYandexCode)})}]),angular.module("translationStation.input",["translationStation.api-constants"]).controller("InputCtrl",["apiConstants","$http","$scope","translationAPIUtil",function(a,b,c,d){c.AllLanguages=a.AllLanguages,c.detectLangBtnText="Detect language",c.isLanguageDetectionEnabled=!0,c.srcLangShouldBeChecked=function(){return"undefined"!=typeof c.translationInput&&(~[3,7].indexOf(c.translationInput.length)||c.translationInput.length%5===0)},c.toggleLanguageDetection=function(){c.srcLangBingCode=null,c.detectLangBtnText="Detect language",c.isLanguageDetectionEnabled=!c.isLanguageDetectionEnabled},c.translate=function(){c.isLanguageDetectionEnabled&&c.srcLangShouldBeChecked()?(c.srcLangBingCode=null,d.detectLanguage(c)):!c.srcLangBingCode&&c.isLanguageDetectionEnabled||c.$broadcast("translate")},c.setSrcLang=function(b){c.isLanguageDetectionEnabled=!1,c.detectLangBtnText="Detect language",c.srcLang=$.parseHTML(b.currentTarget.innerHTML.trim())[0].innerHTML.trim(),c.srcLangBingCode=a.BingLanguageCodes[c.srcLang],c.srcLangFrenglyCode=a.FrenglyLanguageCodes[c.srcLang],c.srcLangYandexCode=a.YandexLanguageCodes[c.srcLang],c.translationInput&&c.srcLang&&c.destLang&&c.translate()},c.setDestLang=function(b){c.$broadcast("resetTranslatedText"),c.destLang=$.parseHTML(b.currentTarget.innerHTML.trim())[0].innerHTML.trim(),c.destLangBingCode=a.BingLanguageCodes[c.destLang],c.destLangFrenglyCode=a.FrenglyLanguageCodes[c.destLang],c.destLangYandexCode=a.YandexLanguageCodes[c.destLang],c.translationInput&&c.srcLang&&c.destLang&&c.translate()}}]),$(document).on("click",".language-container",function(a){$(a.currentTarget).parent().children().children().removeClass("selected"),$(a.currentTarget).children().addClass("selected")});